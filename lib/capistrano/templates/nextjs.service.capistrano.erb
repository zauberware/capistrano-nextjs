
[Unit]
Description=Next.js for <%= "#{fetch(:application)} (#{fetch(:stage)})" %>
# start us only once the network and logging subsystems are available
After=syslog.target network.target

[Service]
Type=simple
<%="User=#{nextjs_user}" if fetch(:nextjs_systemctl_user) == :system %>
WorkingDirectory=<%= current_path %>
ExecStart=/bin/bash -l -c 'pnpm start'
ExecReload=/bin/kill -TSTP $MAINPID
ExecStop=/bin/kill -SIGTERM $MAINPID

Restart=always


StandardOutput=file:<%= shared_path %>/log/nextjs.log
StandardError=file:<%= shared_path %>/log/nextjs-error.log

SyslogIdentifier=<%= nextjs_service_unit_name(@config_file) %>
[Install]
WantedBy=multi-user.target
